@using Application.Core.UI.HtmlHelpers
@using LMPlatform.UI.Controllers
@using LMPlatform.UI.ViewModels.ParentalViewModels
@model LMPlatform.UI.ViewModels.ParentalViewModels.StatisticsViewModel
@{
    ViewBag.Title = "Успеваемость";
    Layout = "~/Views/Shared/Layouts/_ParentalLayout.cshtml";
}
@section title
{
Успеваемость
}
@section headscripts
{
}
<div ng-controller="StatCtrl" ng-init="init(@Model.Group.Id)">
    <select class="form-control" ng-model="subject" ng-options="sbjct.Name for sbjct in Subjects"></select><br />

    <table id="stat-table">
        <caption>
            {{subject.Name}}
        </caption>
        <thead>
            <tr>
                <th rowspan="2">ФИО</th>
                <th colspan="4">Пропуски, ч.</th>
                <th colspan="2">Средний балл (Кол-во)</th>
            </tr>
            <tr>
                <th>Лекции</th>
                <th>Лаборатоные</th>
                <th>Практические</th>
                <th>Всего</th>
                <th>Лаборатоные</th>
                <th>Практические</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="student in studentsStat">
                <td>{{$index + 1}}. {{student.Name}}</td>
                <td>{{student.LecHours}}</td>
                <td>{{student.LabHours}}</td>
                <td>{{student.PractHours}}</td>
                <td>{{student.TotalHours}}</td>
                <td ng-if="student.LabMark > 0" >{{student.LabMark}} ({{student.LabsCount}})</td>
                <td ng-if="student.LabMark <= 0" >-</td>
                <td ng-if="student.PractMark > 0">{{student.PractMark}} ({{student.PractsCount}})</td>
                <td ng-if="student.PractMark <= 0" >-</td>
            </tr>
        </tbody>
    </table>


    @*  <div id="stat-table">
        <div class="stat-row-head">
            <div class="stat-cell bordered">ФИО</div>
            <div>
                <div>Пропуски</div>
            </div>
            <div class="stat-cell bordered">Пропуски (лекции)</div>
            <div class="stat-cell bordered">Пропуски (лабораторные)</div>
            <div class="stat-cell bordered">Пропуски (практические)</div>
            <div class="stat-cell bordered">Всего пропусков</div>
            <div class="stat-cell bordered">Средний балл</div>
        </div>
        <div class="stat-row" ng-repeat="student in data.Students">
            <div class="stat-cell">{{student.FullName}}</div>
        </div>
    </div>*@

</div>

<style>
    #stat-table {
        margin: 20px 5px;
        font-size: 14px;
        background-color: white;
        width: 100%;
        border: solid #ddd 1px;
    }

        #stat-table caption {
            text-align: left;
            font-size: 17px;
            padding: 5px;
        }

        #stat-table th,
        #stat-table td {
            border: solid #ddd 1px;
            padding: 5px;
            text-align: center;
        }

            #stat-table td:first-child {
                text-align: left;
            }
</style>


@*<div>
        @Html.DropDownList("students", Model.GetStudentsSelectList(), new { @class = "students-stat" })
    </div>

    <div id="stat-table">
        @Html.Partial("_StatDataTable", new StatDataTableViewModel
                 {
                     DataTable = Html.DataTable("incomingMessageList", (ParentalController controller) => controller.GetStatCollection(null), new { param = true }),
                     DataTableOptions = new DataTableOptions
                         {
                             Pagination = true,
                             Searchable = true,
                             Sortable = false,
                             Filterable = false,
                             Info = false,
                             /*OnComplete = "initDisplayMessageDialog"*/
                         }
                 })

    </div>*@


