@model LMPlatform.UI.ViewModels.MessageViewModel

<script src="../../../Scripts/application/message.js"></script>
<div id="msgForm">
    @using (Html.BeginForm("WriteMessage", "Message", FormMethod.Post))
    {
        <div class="error-limit-registr">
            @Html.ValidationSummary("Ошибка!", new { @class = "alert alert-error" })
        </div>

        <div>
            <hgroup style="text-align: center; margin-bottom: 20px">
                <h1>@ViewBag.Title</h1>
            </hgroup>
            @Html.HiddenFor(m => m.FromId)
            <div>
                @Html.LabelFor(m => m.MessageText)
                @Html.TextAreaFor(m => m.MessageText)
                @Html.ValidationMessageFor(m => m.MessageText, " ")
            </div>
            <div>
                @Html.LabelFor(m => m.Recipients, new { @class = "control-label" })
                <div id="msgRecipients"></div>
                <div>
                    @Html.DropDownList("selectRecipients", Model.GetRecipients(), "Выберите получателя...", new { @class = "form-control" })
                </div>
                <p></p>
            </div>
        </div>
    }
</div>
<script type="text/javascript">
    $(function () {
        $('select[name=selectRecipients]').change(function () {
            var id = $(this).val();
            var name = $(this).find('option:selected').text();

            addRecipient(id, name);
        });
    });
</script>


