@using LMPlatform.Models
@model LMPlatform.UI.ViewModels.SubjectViewModels.SubjectWorkingViewModel
@{
    ViewBag.Title = Model.SubjectName;
    Layout = "../Shared/Layouts/_MainUsingNavLayout.cshtml";
}

@section scripts
{
    @Scripts.Render("~/bundles/datatable", "~/Scripts/ckeditor/ckeditor.js")
    @*@Scripts.Render("~/bundle/subjectWorking")*@

}

<div ng-app="mainApp" ng-controller="MainCtrl" ng-init="init('@Model.SubjectId')">
    @section navleft
    {
        @foreach (var module in Model.Modules.Where(e => e.Type != ModuleType.Results && e.Type != ModuleType.StatisticsVisits && e.Type != ModuleType.ScheduleProtection).ToList())
        {
            <li class="navLink">
                <a class="moduleLinks" href="#@module.Type">@module.Name</a>
            </li>

        }
        <div>
            <img style="margin-left: 15%; margin-top: 10%; width: 200px" src="../../Images/schoolclass.png" />
        </div>

        @if (User.IsInRole("lector"))
        {
            <li><a id="subGroups" href="@Url.Action("SubGroups", "Subject", new { subjectId = Model.SubjectId })"><i class="fa fa-users fa-1x fa-tab"></i>Управление подгруппами</a></li>
        }
        <li><a href="@Url.Action("Subjects", "Subject")"><i class="fa fa-reply fa-1x fa-tab"></i>Сменить предмет</a></li>
        <li><a href="@Url.Action("Index", "Lms")"><i class="fa fa-arrow-left fa-1x fa-tab"></i>Назад</a></li>

    }

    @section navpanel
    {
        @Model.SubjectName
    }

    <div ng-view></div>

</div>
<script type="text/javascript" src="~/Scripts/application/mainApp.js"></script>
<script>
    $(document).ready(function () {
        $('li.navLink').first().click();
        $('a.moduleLinks').first().click();
    });
</script>
